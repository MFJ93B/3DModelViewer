<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Br√§hler 3D Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: transparent;
        }
        
        .hero-section {
            background: transparent;
            padding: 40px 20px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .viewer-container {
            max-width: 1200px;
            width: 100%;
            text-align: center;
        }
        
        /* Logo Styles */
        .logo-container {
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .logo {
            max-width: 133px;
            width: 100%;
            height: auto;
            filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2));
        }
        
        .subtitle {
            color: #666;
            font-size: 18px;
            margin-bottom: 30px;
            font-weight: 500;
        }
        
        /* 3D Viewer Container */
        .viewer-wrapper {
            position: relative;
            width: 100%;
            height: 600px;
            background: transparent;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        /* Vollbild-Modus: Wei√üer Hintergrund */
        .viewer-wrapper:fullscreen {
            background: white;
        }
        
        .viewer-wrapper:-webkit-full-screen {
            background: white;
        }
        
        .viewer-wrapper:-moz-full-screen {
            background: white;
        }
        
        .viewer-wrapper:-ms-fullscreen {
            background: white;
        }
        
        model-viewer {
            width: 100%;
            height: 100%;
            background-color: transparent;
        }
        
        /* Im Vollbildmodus auch model-viewer mit wei√üem Hintergrund */
        .viewer-wrapper:fullscreen model-viewer,
        .viewer-wrapper:-webkit-full-screen model-viewer,
        .viewer-wrapper:-moz-full-screen model-viewer,
        .viewer-wrapper:-ms-fullscreen model-viewer {
            background-color: white;
        }
        
        /* Control Buttons */
        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 100;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 20px;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }
        
        .btn {
            background: rgba(208, 0, 58, 0.1);
            border: 2px solid rgba(208, 0, 58, 0.3);
            color: #333;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            background: rgba(208, 0, 58, 0.15);
            border-color: rgba(208, 0, 58, 0.6);
            transform: translateY(-2px);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn.active {
            background: rgba(208, 0, 58, 0.9);
            border-color: #d0003a;
            color: white;
            box-shadow: 0 4px 12px rgba(208, 0, 58, 0.4);
        }
        
        .btn-text {
            display: inline;
        }
        
        /* Top Controls */
        .top-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }
        
        .btn-icon {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid rgba(208, 0, 58, 0.3);
            border-radius: 50%;
            color: #333;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .btn-icon:hover {
            background: rgba(208, 0, 58, 0.9);
            border-color: #d0003a;
            color: white;
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(208, 0, 58, 0.5);
        }
        
        /* Zoom Controls */
        .zoom-controls {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }
        
        /* Controls Info */
        .controls-info {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 14px;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(208, 0, 58, 0.95);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            z-index: 1000;
            display: none;
            animation: slideUp 0.3s ease;
            box-shadow: 0 4px 20px rgba(208, 0, 58, 0.4);
            font-weight: 600;
        }
        
        .toast.show {
            display: block;
        }
        
        @keyframes slideUp {
            from {
                bottom: 80px;
                opacity: 0;
            }
            to {
                bottom: 100px;
                opacity: 1;
            }
        }
        
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .hero-section {
                padding: 20px 10px;
            }
            
            .logo {
                max-width: 100px;
            }
            
            .subtitle {
                font-size: 14px;
                margin-bottom: 20px;
            }
            
            .viewer-wrapper {
                height: 400px;
                border-radius: 12px;
            }
            
            /* Bottom Controls auf Mobile */
            .controls {
                bottom: 10px;
                padding: 8px 12px;
                gap: 6px;
                border-radius: 30px;
                flex-wrap: nowrap;
                max-width: 95%;
            }
            
            .btn {
                padding: 8px 12px;
                font-size: 12px;
                gap: 4px;
                min-width: 0;
                flex-shrink: 1;
            }
            
            /* Text bei kleinen Screens ausblenden */
            .btn-text {
                display: none;
            }
            
            /* Top Controls */
            .top-controls {
                top: 10px;
                right: 10px;
                gap: 6px;
            }
            
            .btn-icon {
                width: 38px;
                height: 38px;
                font-size: 16px;
            }
            
            /* Zoom Controls */
            .zoom-controls {
                right: 10px;
                gap: 6px;
            }
            
            .zoom-controls .btn-icon {
                width: 38px;
                height: 38px;
            }
            
            .controls-info {
                font-size: 11px;
                margin-top: 15px;
                padding: 0 10px;
            }
            
            .toast {
                font-size: 13px;
                padding: 10px 20px;
                max-width: 90%;
            }
        }
        
        /* Extra Small Screens */
        @media (max-width: 480px) {
            .logo {
                max-width: 80px;
            }
            
            .subtitle {
                font-size: 12px;
            }
            
            .viewer-wrapper {
                height: 300px;
            }
            
            .controls {
                padding: 6px 10px;
                gap: 4px;
            }
            
            .btn {
                padding: 6px 10px;
                font-size: 18px;
            }
            
            .btn-icon {
                width: 34px;
                height: 34px;
                font-size: 14px;
            }
            
            .zoom-controls .btn-icon {
                width: 34px;
                height: 34px;
            }
        }
    </style>
</head>
<body>
    
    <div class="hero-section">
        <div class="viewer-container">
            
            <!-- Logo -->
            <div class="logo-container">
                <img src="cropped-logo_farbig_header-1.png" alt="Br√§hler Systems Logo" class="logo">
            </div>
            
            <p class="subtitle">
                #1 in customized conference technology
            </p>
            
            <!-- 3D Viewer Wrapper -->
            <div class="viewer-wrapper">
                
                <!-- Top Controls (Screenshot, Reset, Fullscreen) -->
                <div class="top-controls">
                    <button class="btn-icon" id="screenshotBtn" title="Screenshot">üì∑</button>
                    <button class="btn-icon" id="resetBtn" title="Ansicht zur√ºcksetzen">üîÑ</button>
                    <button class="btn-icon" id="fullscreenBtn" title="Vollbild">‚õ∂</button>
                </div>
                
                <!-- Zoom Controls (Right Side) -->
                <div class="zoom-controls">
                    <button class="btn-icon" id="zoomInBtn" title="Hineinzoomen">+</button>
                    <button class="btn-icon" id="zoomOutBtn" title="Herauszoomen">‚àí</button>
                </div>
                
                <!-- Model Viewer Script -->
                <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
                
                <!-- Model Viewer -->
                <model-viewer 
                    id="viewer"
                    src="3dModel.glb"
                    alt="Br√§hler Conference System"
                    
                    camera-controls
                    camera-orbit="45deg 75deg 2.5m"
                    min-camera-orbit="auto auto 0.5m"
                    max-camera-orbit="auto auto 10m"
                    
                    auto-rotate
                    rotation-per-second="25deg"
                    
                    shadow-intensity="2"
                    environment-image="neutral"
                    exposure="1.3"
                    
                    ar
                    ar-modes="webxr scene-viewer quick-look"
                    ar-scale="auto"
                    
                    touch-action="pan-y"
                    
                    loading="eager"
                    reveal="auto">
                </model-viewer>
                
                <!-- Bottom Controls -->
                <div class="controls">
                    <button class="btn" id="toggleRotateBtn">
                        <span id="rotateIcon">‚è∏</span>
                        <span class="btn-text" id="rotateText">Rotation</span>
                    </button>
                    
                    <button class="btn" id="arBtn">
                        <span>üì±</span>
                        <span class="btn-text">AR</span>
                    </button>
                </div>
                
            </div>
            
            <div class="controls-info">
                üñ±Ô∏è Drehen & Zoomen | üì∑ Screenshot | ‚õ∂ Vollbild | üì± AR auf Mobilger√§ten
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
    
    <!-- JavaScript f√ºr alle Funktionen -->
    <script>
        const viewer = document.querySelector('#viewer');
        const toggleRotateBtn = document.getElementById('toggleRotateBtn');
        const screenshotBtn = document.getElementById('screenshotBtn');
        const resetBtn = document.getElementById('resetBtn');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const zoomInBtn = document.getElementById('zoomInBtn');
        const zoomOutBtn = document.getElementById('zoomOutBtn');
        const arBtn = document.getElementById('arBtn');
        const toast = document.getElementById('toast');
        const rotateIcon = document.getElementById('rotateIcon');
        const rotateText = document.getElementById('rotateText');
        
        let isRotating = true;
        
        // Toast Notification anzeigen
        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }
        
        // Auto-Rotation Toggle
        toggleRotateBtn.addEventListener('click', () => {
            isRotating = !isRotating;
            if (isRotating) {
                viewer.setAttribute('auto-rotate', '');
                rotateIcon.textContent = '‚è∏';
                rotateText.textContent = 'Rotation';
                toggleRotateBtn.classList.add('active');
                showToast('Auto-Rotation aktiviert');
            } else {
                viewer.removeAttribute('auto-rotate');
                rotateIcon.textContent = '‚ñ∂';
                rotateText.textContent = 'Rotation';
                toggleRotateBtn.classList.remove('active');
                showToast('Auto-Rotation pausiert');
            }
        });
        
        // Screenshot
        screenshotBtn.addEventListener('click', async () => {
            try {
                const blob = await viewer.toBlob({ idealAspect: true });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'braehler-3d-model.png';
                a.click();
                showToast('Screenshot gespeichert! üì∑');
            } catch (error) {
                showToast('Screenshot fehlgeschlagen');
                console.error('Screenshot error:', error);
            }
        });
        
        // Reset View
        resetBtn.addEventListener('click', () => {
            viewer.resetTurntableRotation();
            viewer.cameraOrbit = '45deg 75deg 2.5m';
            viewer.fieldOfView = '30deg';
            showToast('Ansicht zur√ºckgesetzt üîÑ');
        });
        
        // Fullscreen
        fullscreenBtn.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                viewer.parentElement.requestFullscreen().catch(err => {
                    showToast('Vollbild nicht verf√ºgbar');
                });
                fullscreenBtn.textContent = '‚õ∂';
                showToast('Vollbild aktiviert');
            } else {
                document.exitFullscreen();
                fullscreenBtn.textContent = '‚õ∂';
                showToast('Vollbild beendet');
            }
        });
        
        // Zoom In
        zoomInBtn.addEventListener('click', () => {
            const orbit = viewer.getCameraOrbit();
            const newRadius = Math.max(orbit.radius * 0.8, 0.5);
            viewer.cameraOrbit = `${orbit.theta}rad ${orbit.phi}rad ${newRadius}m`;
            showToast('Herangezoomt üîç');
        });
        
        // Zoom Out
        zoomOutBtn.addEventListener('click', () => {
            const orbit = viewer.getCameraOrbit();
            const newRadius = Math.min(orbit.radius * 1.2, 10);
            viewer.cameraOrbit = `${orbit.theta}rad ${orbit.phi}rad ${newRadius}m`;
            showToast('Herausgezoomt üîç');
        });
        
        // AR Button
        arBtn.addEventListener('click', () => {
            if (viewer.canActivateAR) {
                viewer.activateAR();
                showToast('AR wird gestartet... üì±');
            } else {
                showToast('AR nicht verf√ºgbar auf diesem Ger√§t');
            }
        });
        
        // Model Load Event
        viewer.addEventListener('load', () => {
            showToast('Modell geladen! ‚úÖ');
        });
        
        // Error Event
        viewer.addEventListener('error', (event) => {
            showToast('Fehler beim Laden! ‚ùå');
            console.error('Model loading error:', event);
        });
        
        // Keyboard Shortcuts
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case ' ': // Leertaste
                    e.preventDefault();
                    toggleRotateBtn.click();
                    break;
                case 'r':
                case 'R':
                    resetBtn.click();
                    break;
                case 'f':
                case 'F':
                    fullscreenBtn.click();
                    break;
                case 's':
                case 'S':
                    screenshotBtn.click();
                    break;
                case '+':
                    zoomInBtn.click();
                    break;
                case '-':
                    zoomOutBtn.click();
                    break;
            }
        });
        
        // Initial state
        toggleRotateBtn.classList.add('active');
        
    </script>
    
</body>
</html>
